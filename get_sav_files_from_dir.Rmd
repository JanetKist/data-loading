---
title: "Get sav files form a directory."
date: "29-04-2024"
description: "An example on getting sav files form a directory."
author: "Lisette de Schipper"
output: html_notebook
---

If you want to retrieve the paths to all sav files in a directory (and its subdirectories), you can use the following:

```{r}
# this is a function that checks whether a string is a sav-file or not
is_sav_file <- function(file) {
  return (grepl("+.sav", file, ignore.case = TRUE))
}

# get all sav files from a directory
get_sav_file <- function(dir) {
  files <- list.files(dir)
  
  # get the location of the sav file from the folder
  # files[file] is the name of the file. Anything false is not a sav file.
  file <- sapply(files, is_sav_file)
  
  if (any(file)){
    if (length(sav_files) > 1){
      warning(paste(dir, "contains", length(sav_files), "sav files."))
    }
    return (sav_files)
  }
  #raise exception
  stop(paste(dir, "contains no sav file :(."))
}

common_path <- r"(some/path/to/some/dir)"

# get all nested dirs
dirs <- list.dirs(path=common_path, full.names = TRUE, recursive = FALSE)

#get all sav files
files = sapply(dirs, get_sav_files)

#get paths
files = file.path(dirs, files)

files
```

